# V2 UX Kit: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π

## 1. –ê—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è V2 flow

### 1.1 Start/Menu (cabinet)
**–°–æ–æ–±—â–µ–Ω–∏—è:**
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: `V2_CABINET_GREETING` (–º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç)
- –°—Ç–∞—Ç—É—Å: `V2_CABINET_STATUS` (–ø—Ä–æ–µ–∫—Ç, —à–∞–≥ X –∏–∑ Y, –ø—Ä–æ–≥—Ä–µ—Å—Å %)
- –ü–æ–¥—Å–∫–∞–∑–∫–∞: `V2_MENU_HINT` (–ø—Ä–æ –∫–Ω–æ–ø–∫—É –ú–µ–Ω—é)

**–ö–Ω–æ–ø–∫–∏:**
- Reply: `üè† –ú–µ–Ω—é` (–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è)
- Inline: `‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å`, `üìå –¢–µ–∫—É—â–∏–π —à–∞–≥`, `üóÇ –ü—Ä–æ–µ–∫—Ç`, `üß≠ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ`, `üìÑ –ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã`, `‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç`, `‚ùì –ü–æ–º–æ—â—å`
- Callback prefixes: `v2menu:*`, `v2cab:*`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –°—Ç–∞—Ç—É—Å –∫–∞–±–∏–Ω–µ—Ç–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤ `menu.py:_cabinet_status_text()`
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ
- –ö–Ω–æ–ø–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ —ç–º–æ–¥–∑–∏/—Å—Ç–∏–ª–∏

### 1.2 Form (—à–∞–≥–∏)
**–°–æ–æ–±—â–µ–Ω–∏—è:**
- –§–æ—Ä–º–∞—Ç: `format_step_message()` ‚Üí "–®–∞–≥ X –∏–∑ Y" + "üìå *title*" + intro + todo + example
- –û—à–∏–±–∫–∏: `V2_INVALID_*` (required, email, link, time, cost, budget)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ: `V2_SAVED_RESUME`

**–ö–Ω–æ–ø–∫–∏:**
- Inline: `‚¨ÖÔ∏è –ù–∞–∑–∞–¥`, `‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å` (–µ—Å–ª–∏ optional), `üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å`, `‚úÖ –ì–æ—Ç–æ–≤–æ` (–¥–ª—è multi-link)
- Callback prefix: `v2form:*`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ `form.py:_form_kb()` –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- –û—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å—Ç–∏–ª—è –¥–ª—è –≤—Å–µ—Ö —à–∞–≥–æ–≤

### 1.3 Preview
**–°–æ–æ–±—â–µ–Ω–∏—è:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `V2_PREVIEW_POST`
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: `SUBMIT_Q7_SEND_PROMPT`
- –£—Å–ø–µ—Ö: `V2_SUBMIT_CONFIRM`

**–ö–Ω–æ–ø–∫–∏:**
- Inline: `‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é`, `‚úèÔ∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã`, `üè† –ú–µ–Ω—é`
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: `‚úÖ –î–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å`, `‚ùå –ù–µ—Ç, –≤–µ—Ä–Ω—É—Ç—å—Å—è`
- Callback prefix: `v2preview:*`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü—Ä–µ–≤—å—é —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ `render_post()` –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
- –ö–Ω–æ–ø–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏ (—ç–º–æ–¥–∑–∏ + —Ç–µ–∫—Å—Ç)

### 1.4 Moderation (admin)
**–°–æ–æ–±—â–µ–Ω–∏—è:**
- –ó–∞–ø—Ä–æ—Å –¥–æ—Ä–∞–±–æ—Ç–∫–∏: `V2_MOD_ASK_FIX`
- –ó–∞–ø—Ä–æ—Å –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è: `V2_MOD_ASK_REJECT`
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: `V2_MOD_APPROVE_USER`, `V2_MOD_NEEDS_FIX_USER`, `V2_MOD_REJECT_USER`

**–ö–Ω–æ–ø–∫–∏:**
- Admin inline: `‚úÖ Approve`, `üõ† Needs fix`, `‚ùå Reject`, `üìã Copy post`, `üë§ Author contact`
- User inline: `‚úèÔ∏è –í–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏` (–ø–æ—Å–ª–µ needs_fix)
- Callback prefix: `v2mod:*`, `v2fix:*`

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ö–Ω–æ–ø–∫–∏ –∞–¥–º–∏–Ω–∞ —Ö–∞—Ä–¥–∫–æ–¥—è—Ç—Å—è –≤ `preview.py:_admin_mod_kb()` –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è copy –∏–∑ `messages.py`
- –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å—Ç–∏–ª—è –¥–ª—è –∞–¥–º–∏–Ω-–¥–µ–π—Å—Ç–≤–∏–π

### 1.5 –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
1. **Copy —Ä–∞–∑–±—Ä–æ—Å–∞–Ω** –ø–æ `messages.py` –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (V2_*, BTN_*, ERROR_*)
2. **–ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è** –≤ —Ä–æ—É—Ç–µ—Ä–∞—Ö –±–µ–∑ –µ–¥–∏–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
3. **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥** —Ä–∞–∑–±—Ä–æ—Å–∞–Ω –º–µ–∂–¥—É `format_step.py`, `project_renderer.py`, —Ä–æ—É—Ç–µ—Ä–∞–º–∏
4. **Callback prefixes** –Ω–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã (`v2form`, `v2preview`, `v2menu`, `v2mod`, `v2cab`, `v2fix`)
5. **–°—Ç–∏–ª—å —Å–æ–æ–±—â–µ–Ω–∏–π** –Ω–µ –µ–¥–∏–Ω—ã–π (HTML —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É)

---

## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π UI Kit

### 2.1 –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src/v2/ui/
‚îú‚îÄ‚îÄ __init__.py          # –≠–∫—Å–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ API
‚îú‚îÄ‚îÄ copy.py              # V2 copy (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç messages.py, –Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç)
‚îú‚îÄ‚îÄ keyboards.py         # –ï–¥–∏–Ω—ã–µ –±–∏–ª–¥–µ—Ä—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä
‚îú‚îÄ‚îÄ render.py            # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π (—à–∞–≥–∏, –ø—Ä–µ–≤—å—é, –æ—à–∏–±–∫–∏)
‚îî‚îÄ‚îÄ callbacks.py         # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ callback prefixes –∏ —É—Ç–∏–ª–∏—Ç—ã
```

### 2.2 –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

–ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å `src/v2/ui/` –∫–∞–∫ –æ–±—ë—Ä—Ç–∫—É:
- `copy.py` ‚Üí –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `src.bot.messages.get_copy()`, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `keyboards.py` ‚Üí —Ä–∞—Å—à–∏—Ä—è–µ—Ç `src.bot.keyboards`, –¥–æ–±–∞–≤–ª—è—è V2-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –±–∏–ª–¥–µ—Ä—ã
- `render.py` ‚Üí –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `src/v2/format_step.py` –∏ `src/v2/rendering/`, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- `callbacks.py` ‚Üí –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ prefixes

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç 2 (–æ–±—ë—Ä—Ç–∫–∞) –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –±–µ–∑ breaking changes.

---

## 3. –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Ñ—É–Ω–∫—Ü–∏–π UI Kit

### 3.1 `src/v2/ui/render.py`

```python
def render_step(
    step_idx: int,
    total: int,
    title: str,
    prompt: str | None = None,
    current: str | None = None,  # —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
    example: str | None = None,
    note: str | None = None,     # –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞
) -> str:
    """
    –†–µ–Ω–¥–µ—Ä–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —à–∞–≥–∞ —Ñ–æ—Ä–º—ã –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ (HTML).
    
    –§–æ—Ä–º–∞—Ç:
    - "–®–∞–≥ X –∏–∑ Y"
    - –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
    - "üìå <b>title</b>"
    - –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
    - prompt (–µ—Å–ª–∏ –µ—Å—Ç—å)
    - –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å): "<i>–¢–µ–∫—É—â–µ–µ: current</i>"
    - note (–µ—Å–ª–∏ –µ—Å—Ç—å)
    - –ü—Ä–∏–º–µ—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å): "<i>–ü—Ä–∏–º–µ—Ä:</i> \"example\""
    
    Returns: HTML-—Å—Ç—Ä–æ–∫–∞ –¥–ª—è parse_mode="HTML"
    """

def render_preview_card(
    data: dict,  # submission.answers
    mode: str = "preview",  # "preview" | "publish" | "cabinet"
    header: str | None = None,
) -> dict[str, Any]:
    """
    –†–µ–Ω–¥–µ—Ä–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∫–∞–∫ –µ–¥–∏–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É (HTML).
    
    –§–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–∫–∏:
    - –ó–∞–≥–æ–ª–æ–≤–æ–∫ (–µ—Å–ª–∏ mode="preview" –∏ header –∑–∞–¥–∞–Ω)
    - –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
    - –ë–ª–æ–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (title, description, stack, link, price, contact)
    - –ö–∞–∂–¥—ã–π –±–ª–æ–∫: "<b>label</b>\nvalue" —Å –ø—É—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ –º–µ–∂–¥—É
    
    Returns: {"text": str, "parse_mode": "HTML", "disable_web_page_preview": bool}
    """

def render_error(
    code: str,  # "required" | "email" | "link" | "time" | "cost" | "budget"
    example: str | None = None,
    field_name: str | None = None,
) -> str:
    """
    –†–µ–Ω–¥–µ—Ä–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ.
    
    –§–æ—Ä–º–∞—Ç:
    - "‚ùå <b>–û—à–∏–±–∫–∞</b>"
    - –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
    - –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ messages.py (V2_INVALID_*)
    - –ü—Ä–∏–º–µ—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å): "<i>–ü—Ä–∏–º–µ—Ä:</i> \"example\""
    
    Returns: HTML-—Å—Ç—Ä–æ–∫–∞ –¥–ª—è parse_mode="HTML"
    """

def render_cabinet_status(
    project_name: str | None,
    step_key: str | None,
    step_num: int,
    total: int,
) -> str:
    """
    –†–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ç–∞—Ç—É—Å –∫–∞–±–∏–Ω–µ—Ç–∞ –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ.
    
    –§–æ—Ä–º–∞—Ç:
    - "üìä <b>–¢–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç:</b> {project_name –∏–ª–∏ '–ù–µ –∑–∞–¥–∞–Ω'}"
    - "üìç <b>–®–∞–≥:</b> {step_num} –∏–∑ {total} ({progress}%)"
    
    Returns: HTML-—Å—Ç—Ä–æ–∫–∞ –¥–ª—è parse_mode="HTML"
    """
```

### 3.2 `src/v2/ui/keyboards.py`

```python
def kb_step(
    *,
    back: bool = True,
    cancel: bool = False,  # "–û—Ç–º–µ–Ω–∞" ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é
    home: bool = False,    # "üè† –ú–µ–Ω—é" ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é
    next_: bool = False,   # "‚û°Ô∏è –î–∞–ª—å—à–µ" (–¥–ª—è —à–∞–≥–æ–≤ —Å —è–≤–Ω—ã–º Next)
    preview: bool = False, # "üëÄ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" (–¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —à–∞–≥–∞ –ø–µ—Ä–µ–¥ preview)
    submit: bool = False,  # "‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å" (–¥–ª—è preview)
    skip: bool = False,    # "‚è≠ –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" (–µ—Å–ª–∏ optional)
    save: bool = False,    # "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å" (–¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞)
    finish_links: bool = False,  # "‚úÖ –ì–æ—Ç–æ–≤–æ" (–¥–ª—è multi-link)
) -> InlineKeyboardMarkup:
    """
    –ï–¥–∏–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è —à–∞–≥–∞ —Ñ–æ—Ä–º—ã.
    
    –ü–æ—Ä—è–¥–æ–∫ –∫–Ω–æ–ø–æ–∫ (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑):
    1. –ù–∞–≤–∏–≥–∞—Ü–∏—è: back, cancel, home (–µ—Å–ª–∏ –µ—Å—Ç—å)
    2. –î–µ–π—Å—Ç–≤–∏—è: skip, finish_links, save (–µ—Å–ª–∏ –µ—Å—Ç—å)
    3. –ü–µ—Ä–µ—Ö–æ–¥: next_, preview, submit (–µ—Å–ª–∏ –µ—Å—Ç—å)
    
    Callback data: {PREFIX}:back, {PREFIX}:cancel, {PREFIX}:home, –∏ —Ç.–¥.
    PREFIX –±–µ—Ä—ë—Ç—Å—è –∏–∑ callbacks.py (V2_FORM_PREFIX = "v2form")
    """

def kb_preview(
    *,
    submit: bool = True,
    edit: bool = True,
    menu: bool = True,
) -> InlineKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –ø—Ä–µ–≤—å—é.
    
    –ö–Ω–æ–ø–∫–∏:
    - "‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é" (submit)
    - "‚úèÔ∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã" (edit)
    - "üè† –ú–µ–Ω—é" (menu)
    
    Callback data: {PREFIX}:submit, {PREFIX}:edit, {PREFIX}:menu
    PREFIX = "v2preview"
    """

def kb_preview_confirm() -> InlineKeyboardMarkup:
    """
    –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é.
    
    –ö–Ω–æ–ø–∫–∏:
    - "‚úÖ –î–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å"
    - "‚ùå –ù–µ—Ç, –≤–µ—Ä–Ω—É—Ç—å—Å—è"
    
    Callback data: {PREFIX}:submit_yes, {PREFIX}:submit_no
    """

def kb_cabinet(
    *,
    show_resume: bool = False,
    has_projects: bool = False,
) -> InlineKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫–∞–±–∏–Ω–µ—Ç–∞ (–º–µ–Ω—é).
    
    –ö–Ω–æ–ø–∫–∏ (–ø–æ –ø–æ—Ä—è–¥–∫—É):
    - "‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" (–µ—Å–ª–∏ show_resume)
    - "üìå –¢–µ–∫—É—â–∏–π —à–∞–≥" | "üóÇ –ü—Ä–æ–µ–∫—Ç" (–≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
    - "üß≠ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"
    - "üìÑ –ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã"
    - "‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç"
    - "‚ùì –ü–æ–º–æ—â—å"
    
    Callback data: {PREFIX}:resume, {PREFIX}:current_step, –∏ —Ç.–¥.
    PREFIX = "v2menu"
    """

def kb_restart_confirm() -> InlineKeyboardMarkup:
    """
    –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ".
    
    –ö–Ω–æ–ø–∫–∏:
    - "‚úÖ –î–∞"
    - "‚ùå –ù–µ—Ç"
    
    Callback data: {PREFIX}:restart_yes, {PREFIX}:restart_no
    """

def kb_moderation_admin(submission_id: uuid.UUID) -> InlineKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∞–¥–º–∏–Ω–∞ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏.
    
    –ö–Ω–æ–ø–∫–∏:
    - "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å" | "üõ† –ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É" | "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å" (–≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
    - "üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç" | "üë§ –ö–æ–Ω—Ç–∞–∫—Ç –∞–≤—Ç–æ—Ä–∞" (–≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)
    
    Callback data: {PREFIX}:approve:{id}, {PREFIX}:needs_fix:{id}, –∏ —Ç.–¥.
    PREFIX = "v2mod"
    """

def kb_moderation_user_fix(submission_id: uuid.UUID) -> InlineKeyboardMarkup:
    """
    –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ—Å–ª–µ needs_fix.
    
    –ö–Ω–æ–ø–∫–∞:
    - "‚úèÔ∏è –í–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏"
    
    Callback data: v2fix:edit:{id}
    """
```

### 3.3 `src/v2/ui/copy.py`

```python
# –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç src.bot.messages.get_copy(), –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

# –ì—Ä—É–ø–ø—ã copy ID –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
class V2Copy:
    # –ù–∞–≤–∏–≥–∞—Ü–∏—è
    BTN_BACK = "V2_BTN_BACK"
    BTN_NEXT = "V2_BTN_NEXT"  # –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —è–≤–Ω—ã–π Next
    BTN_SKIP = "V2_BTN_SKIP"
    BTN_SAVE = "V2_SAVE_BTN"
    BTN_MENU = "V2_MENU_BTN"
    BTN_CANCEL = "V2_BTN_CANCEL"  # –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —è–≤–Ω–∞—è –û—Ç–º–µ–Ω–∞
    
    # –ö–∞–±–∏–Ω–µ—Ç
    CABINET_GREETING = "V2_CABINET_GREETING"
    CABINET_STATUS = "V2_CABINET_STATUS"
    MENU_HINT = "V2_MENU_HINT"
    
    # –ü—Ä–µ–≤—å—é
    PREVIEW_HEADER = "V2_PREVIEW_POST"
    PREVIEW_SUBMIT_CONFIRM = "SUBMIT_Q7_SEND_PROMPT"
    PREVIEW_SUCCESS = "V2_SUBMIT_CONFIRM"
    
    # –û—à–∏–±–∫–∏
    ERROR_REQUIRED = "V2_INVALID_REQUIRED"
    ERROR_EMAIL = "V2_INVALID_EMAIL"
    ERROR_LINK = "V2_INVALID_LINK"
    ERROR_TIME = "V2_INVALID_TIME"
    ERROR_COST = "V2_INVALID_COST"
    ERROR_BUDGET = "V2_INVALID_BUDGET"
    
    # –ú–æ–¥–µ—Ä–∞—Ü–∏—è
    MOD_APPROVE_USER = "V2_MOD_APPROVE_USER"
    MOD_NEEDS_FIX_USER = "V2_MOD_NEEDS_FIX_USER"
    MOD_REJECT_USER = "V2_MOD_REJECT_USER"
    
    @staticmethod
    def get(key: str) -> str:
        """–û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ get_copy() –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞."""
        from src.bot.messages import get_copy
        return get_copy(key)
```

### 3.4 `src/v2/ui/callbacks.py`

```python
"""
–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ callback prefixes –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
"""

# Prefixes
V2_FORM_PREFIX = "v2form"
V2_PREVIEW_PREFIX = "v2preview"
V2_MENU_PREFIX = "v2menu"
V2_MOD_PREFIX = "v2mod"
V2_CABINET_PREFIX = "v2cab"  # legacy, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å v2menu
V2_FIX_PREFIX = "v2fix"

# –£—Ç–∏–ª–∏—Ç—ã
def parse_callback(data: str) -> tuple[str | None, str | None]:
    """
    –ü–∞—Ä—Å–∏—Ç callback_data –≤ (prefix, action, *args).
    
    –ü—Ä–∏–º–µ—Ä—ã:
    - "v2form:back" ‚Üí ("v2form", "back", None)
    - "v2preview:submit" ‚Üí ("v2preview", "submit", None)
    - "v2mod:approve:uuid" ‚Üí ("v2mod", "approve", "uuid")
    """
    if not data or ":" not in data:
        return None, None
    parts = data.split(":", 2)
    return parts[0] if len(parts) > 0 else None, parts[1] if len(parts) > 1 else None

def build_callback(prefix: str, action: str, *args: str) -> str:
    """
    –°—Ç—Ä–æ–∏—Ç callback_data –∏–∑ prefix, action –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö args.
    
    –ü—Ä–∏–º–µ—Ä—ã:
    - build_callback("v2form", "back") ‚Üí "v2form:back"
    - build_callback("v2mod", "approve", "uuid") ‚Üí "v2mod:approve:uuid"
    """
    parts = [prefix, action] + list(args)
    return ":".join(parts)
```

---

## 4. Product Rules (–µ–¥–∏–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ UX)

### 4.1 –ï–¥–∏–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (–Ω–∞–∑–≤–∞–Ω–∏—è/—ç–º–æ–¥–∑–∏)

| –î–µ–π—Å—Ç–≤–∏–µ | –≠–º–æ–¥–∑–∏ + –¢–µ–∫—Å—Ç | Callback |
|----------|----------------|----------|
| –ù–∞–∑–∞–¥ | `‚¨ÖÔ∏è –ù–∞–∑–∞–¥` | `{prefix}:back` |
| –î–∞–ª—å—à–µ | `‚û°Ô∏è –î–∞–ª—å—à–µ` | `{prefix}:next` |
| –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å | `‚è≠ –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å` | `{prefix}:skip` |
| –°–æ—Ö—Ä–∞–Ω–∏—Ç—å | `üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å` | `{prefix}:save` |
| –ú–µ–Ω—é | `üè† –ú–µ–Ω—é` | `{prefix}:menu` –∏–ª–∏ reply keyboard |
| –û—Ç–º–µ–Ω–∞ | `‚ùå –û—Ç–º–µ–Ω–∞` | `{prefix}:cancel` |
| –û—Ç–ø—Ä–∞–≤–∏—Ç—å | `‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é` | `{prefix}:submit` |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å | `‚úèÔ∏è –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã` | `{prefix}:edit` |
| –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å | `‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å` | `{prefix}:resume` |
| –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ | `üß≠ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ` | `{prefix}:restart` |
| –¢–µ–∫—É—â–∏–π —à–∞–≥ | `üìå –¢–µ–∫—É—â–∏–π —à–∞–≥` | `{prefix}:current_step` |
| –ü—Ä–æ–µ–∫—Ç | `üóÇ –ü—Ä–æ–µ–∫—Ç` | `{prefix}:project` |
| –ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã | `üìÑ –ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã` | `{prefix}:projects` |
| –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç | `‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç` | `{prefix}:create` |
| –ü–æ–º–æ—â—å | `‚ùì –ü–æ–º–æ—â—å` | `{prefix}:help` |
| –ì–æ—Ç–æ–≤–æ | `‚úÖ –ì–æ—Ç–æ–≤–æ` | `{prefix}:finish_links` |

**–ê–¥–º–∏–Ω-–∫–Ω–æ–ø–∫–∏:**
- `‚úÖ –û–¥–æ–±—Ä–∏—Ç—å` ‚Üí `v2mod:approve:{id}`
- `üõ† –ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É` ‚Üí `v2mod:needs_fix:{id}`
- `‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å` ‚Üí `v2mod:reject:{id}`
- `üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç` ‚Üí `v2mod:copy:{id}`
- `üë§ –ö–æ–Ω—Ç–∞–∫—Ç –∞–≤—Ç–æ—Ä–∞` ‚Üí `v2mod:author:{id}`

### 4.2 –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å —Ç–µ–∫—Å—Ç–∞

**–®–∞–≥–∏ —Ñ–æ—Ä–º—ã:**
- –§–æ—Ä–º–∞—Ç: HTML (`parse_mode="HTML"`)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
  1. "–®–∞–≥ X –∏–∑ Y" (–æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç)
  2. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
  3. "üìå <b>–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–≥–∞</b>" (–∂–∏—Ä–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫)
  4. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
  5. –ü–æ—è—Å–Ω–µ–Ω–∏–µ (–æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç, 1‚Äì2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
  6. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä)
  7. "<i>–ü—Ä–∏–º–µ—Ä:</i> \"—Ç–µ–∫—Å—Ç\"" (–∫—É—Ä—Å–∏–≤ –¥–ª—è –º–µ—Ç–∫–∏, –æ–±—ã—á–Ω—ã–π –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞)

**–û—à–∏–±–∫–∏:**
- –§–æ—Ä–º–∞—Ç: HTML
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
  1. "‚ùå <b>–û—à–∏–±–∫–∞</b>"
  2. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
  3. –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ `messages.py`
  4. –ü—Ä–∏–º–µ—Ä (–µ—Å–ª–∏ –µ—Å—Ç—å): "<i>–ü—Ä–∏–º–µ—Ä:</i> \"—Ç–µ–∫—Å—Ç\""

**–ü—Ä–µ–≤—å—é:**
- –§–æ—Ä–º–∞—Ç: HTML
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
  1. –ó–∞–≥–æ–ª–æ–≤–æ–∫ (–µ—Å–ª–∏ mode="preview"): "üëÄ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä..."
  2. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
  3. –ë–ª–æ–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–∞–∂–¥—ã–π –±–ª–æ–∫: "<b>label</b>\nvalue", –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏)

**–ö–∞–±–∏–Ω–µ—Ç:**
- –§–æ—Ä–º–∞—Ç: HTML
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
  1. "üìä <b>–¢–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç:</b> {–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ '–ù–µ –∑–∞–¥–∞–Ω'}"
  2. "üìç <b>–®–∞–≥:</b> {X} –∏–∑ {Y} ({Z}%)"
  3. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
  4. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–∑ `V2_CABINET_GREETING`

### 4.3 –ù–∞–≤–∏–≥–∞—Ü–∏—è

**–ù–∞–∑–∞–¥:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥
- –ï—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞ –Ω–µ—Ç ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é

**–û—Ç–º–µ–Ω–∞:**
- –û—á–∏—â–∞–µ—Ç FSM state
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –º–µ–Ω—é

**–ú–µ–Ω—é:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π escape hatch
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `submission_id` –≤ state (—á—Ç–æ–±—ã "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" —Ä–∞–±–æ—Ç–∞–ª–æ)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–±–∏–Ω–µ—Ç

**–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å:**
- –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è optional —à–∞–≥–æ–≤
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—è
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É

**–°–æ—Ö—Ä–∞–Ω–∏—Ç—å:**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –ë–î
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π /resume"
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –º–µ–Ω—é

### 4.4 –ü—Ä–µ–≤—å—é –∫–∞–∫ –∫–∞—Ä—Ç–æ—á–∫–∞

**–§–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–∫–∏:**
- –ï–¥–∏–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è preview, publish, cabinet
- –ë–ª–æ–∫–∏: title, description, stack, link, price, contact
- –ö–∞–∂–¥—ã–π –±–ª–æ–∫: "<b>label</b>\nvalue"
- –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏
- –ü—Ä–æ–ø—É—Å–∫ –ø—É—Å—Ç—ã—Ö –±–ª–æ–∫–æ–≤

**–†–µ–∂–∏–º—ã:**
- `preview`: –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ "üëÄ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä..."
- `publish`: —Ç–æ–ª—å–∫–æ —Ç–µ–ª–æ –∫–∞—Ä—Ç–æ—á–∫–∏ (–¥–ª—è –∫–∞–Ω–∞–ª–∞)
- `cabinet`: —Ç–æ–ª—å–∫–æ —Ç–µ–ª–æ –∫–∞—Ä—Ç–æ—á–∫–∏ (–¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ)

---

## 5. –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏–µ–º–∫–∏ UX (10 –ø—É–Ω–∫—Ç–æ–≤)

### 5.1 –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –∫–Ω–æ–ø–∫–∏
- [ ] **1. –ö–Ω–æ–ø–∫–∞ "üè† –ú–µ–Ω—é"** –¥–æ—Å—Ç—É–ø–Ω–∞ —Å –ª—é–±–æ–≥–æ —à–∞–≥–∞ (reply keyboard)
- [ ] **2. –ö–Ω–æ–ø–∫–∞ "‚¨ÖÔ∏è –ù–∞–∑–∞–¥"** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] **3. –ö–Ω–æ–ø–∫–∞ "‚è≠ –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è optional —à–∞–≥–æ–≤
- [ ] **4. –ö–Ω–æ–ø–∫–∞ "üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å"** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –º–µ–Ω—é

### 5.2 –°–æ–æ–±—â–µ–Ω–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] **5. –í—Å–µ —à–∞–≥–∏ —Ñ–æ—Ä–º—ã** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: "–®–∞–≥ X –∏–∑ Y" + "üìå *title*" + –ø–æ—è—Å–Ω–µ–Ω–∏–µ + –ø—Ä–∏–º–µ—Ä
- [ ] **6. –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ: "‚ùå *–û—à–∏–±–∫–∞*" + —Ç–µ–∫—Å—Ç + –ø—Ä–∏–º–µ—Ä
- [ ] **7. –ü—Ä–µ–≤—å—é –∫–∞—Ä—Ç–æ—á–∫–∏** –≤—ã–≥–ª—è–¥–∏—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –≤ preview –∏ –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (consistency check)

### 5.3 –ö–∞–±–∏–Ω–µ—Ç –∏ —Å—Ç–∞—Ç—É—Å
- [ ] **8. –ö–∞–±–∏–Ω–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å: –ø—Ä–æ–µ–∫—Ç, —à–∞–≥ X –∏–∑ Y, –ø—Ä–æ–≥—Ä–µ—Å—Å %
- [ ] **9. –ö–Ω–æ–ø–∫–∞ "‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"** –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç FSM –∏–∑ –ë–î –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–≥

### 5.4 –ú–æ–¥–µ—Ä–∞—Ü–∏—è
- [ ] **10. –ê–¥–º–∏–Ω-–∫–Ω–æ–ø–∫–∏** –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∏ copy –∏–∑ `messages.py` (–Ω–µ —Ö–∞—Ä–¥–∫–æ–¥)

---

## 6. –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ (—Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### 6.1 –°–æ–∑–¥–∞–Ω–∏–µ UI Kit (–Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã)

1. **`src/v2/ui/__init__.py`**
   - –≠–∫—Å–ø–æ—Ä—Ç –ø—É–±–ª–∏—á–Ω–æ–≥–æ API: `render_step`, `render_preview_card`, `render_error`, `kb_step`, `kb_preview`, –∏ —Ç.–¥.

2. **`src/v2/ui/copy.py`**
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è V2 copy (–æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `messages.py`)

3. **`src/v2/ui/keyboards.py`**
   - –ï–¥–∏–Ω—ã–µ –±–∏–ª–¥–µ—Ä—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 3.2

4. **`src/v2/ui/render.py`**
   - –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 3.1

5. **`src/v2/ui/callbacks.py`**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ prefixes –∏ —É—Ç–∏–ª–∏—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

### 6.2 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ä–æ—É—Ç–µ—Ä–æ–≤ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤)

6. **`src/v2/routers/form.py`**
   - –ó–∞–º–µ–Ω–∏—Ç—å `_form_kb()` ‚Üí `ui.keyboards.kb_step()`
   - –ó–∞–º–µ–Ω–∏—Ç—å `_question_text()` ‚Üí `ui.render.render_step()`
   - –ó–∞–º–µ–Ω–∏—Ç—å –ø–æ–∫–∞–∑ –æ—à–∏–±–æ–∫ ‚Üí `ui.render.render_error()`

7. **`src/v2/routers/preview.py`**
   - –ó–∞–º–µ–Ω–∏—Ç—å `_preview_kb()` ‚Üí `ui.keyboards.kb_preview()`
   - –ó–∞–º–µ–Ω–∏—Ç—å `_preview_confirm_kb()` ‚Üí `ui.keyboards.kb_preview_confirm()`
   - –ó–∞–º–µ–Ω–∏—Ç—å `render_post()` ‚Üí `ui.render.render_preview_card()` (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç)
   - –ó–∞–º–µ–Ω–∏—Ç—å `_admin_mod_kb()` ‚Üí `ui.keyboards.kb_moderation_admin()`

8. **`src/v2/routers/menu.py`**
   - –ó–∞–º–µ–Ω–∏—Ç—å `menu_cabinet_inline_kb()` ‚Üí `ui.keyboards.kb_cabinet()` (–∏–ª–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å)
   - –ó–∞–º–µ–Ω–∏—Ç—å `_cabinet_status_text()` ‚Üí `ui.render.render_cabinet_status()`

9. **`src/v2/routers/start.py`**
   - –ó–∞–º–µ–Ω–∏—Ç—å `cabinet_kb()` ‚Üí `ui.keyboards.kb_cabinet()` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

10. **`src/v2/routers/moderation.py`**
    - –ó–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –∫–Ω–æ–ø–æ–∫ ‚Üí `ui.keyboards.kb_moderation_admin()`
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ui.keyboards.kb_moderation_user_fix()` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 6.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

11. **`src/v2/format_step.py`**
    - –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `ui.render.render_step()`)
    - –ò–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `ui.render.render_step()` –≤–µ–∑–¥–µ

12. **`src/bot/keyboards.py`**
    - –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å V1 –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∫–∞–∫ –µ—Å—Ç—å
    - V2 –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ `src/v2/ui/keyboards.py`

### 6.4 –¢–µ—Å—Ç—ã

13. **`tests/test_v2_ux.py`** (—Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å)
    - –¢–µ—Å—Ç—ã –¥–ª—è `ui.render.*`
    - –¢–µ—Å—Ç—ã –¥–ª—è `ui.keyboards.*`
    - –¢–µ—Å—Ç—ã –¥–ª—è `ui.callbacks.*`

---

## 7. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (1‚Äì2 –¥–Ω—è)
- –°–æ–∑–¥–∞—Ç—å `src/v2/ui/` –º–æ–¥—É–ª–∏ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `callbacks.py` –∏ `copy.py`
- –ù–∞–ø–∏—Å–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

### –§–∞–∑–∞ 2: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (2‚Äì3 –¥–Ω—è)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `render.py` (render_step, render_preview_card, render_error, render_cabinet_status)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `form.py` –∏ `menu.py`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å consistency preview/publish

### –§–∞–∑–∞ 3: –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã (2‚Äì3 –¥–Ω—è)
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `keyboards.py` (kb_step, kb_preview, kb_cabinet, kb_moderation_*)
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–æ –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ callback handlers

### –§–∞–∑–∞ 4: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞ (1‚Äì2 –¥–Ω—è)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ–∫–ª–∏—Å—Ç –ø—Ä–∏–µ–º–∫–∏ (10 –ø—É–Ω–∫—Ç–æ–≤)
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–ò—Ç–æ–≥–æ:** ~6‚Äì10 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## 8. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: Breaking changes –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ë—Ä—Ç–∫–∏ (–≤–∞—Ä–∏–∞–Ω—Ç 2 –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 2.2), –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞ –∑–∞ —Ä–æ—É—Ç–µ—Ä–æ–º

### –†–∏—Å–∫ 2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É V1 –∏ V2
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** V2 UI Kit –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `messages.py` –∏ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–∞—Å—Ç–∏ `keyboards.py` —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é

### –†–∏—Å–∫ 3: –ü–æ—Ç–µ—Ä—è –≥–∏–±–∫–æ—Å—Ç–∏ –ø—Ä–∏ –µ–¥–∏–Ω–æ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–æ–ø—É—Å–∫–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (note, current, –∏ —Ç.–¥.)

---

## 9. –ò—Ç–æ–≥–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ V2 UI Kit:**
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π: `src/v2/ui/{copy,keyboards,render,callbacks}.py`
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Ñ—É–Ω–∫—Ü–∏–π: render_step, render_preview_card, render_error, kb_step, kb_preview, –∏ —Ç.–¥.
- ‚úÖ Product rules: –µ–¥–∏–Ω—ã–µ –∫–Ω–æ–ø–∫–∏, —Å—Ç–∏–ª—å —Ç–µ–∫—Å—Ç–∞, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –ø—Ä–µ–≤—å—é –∫–∞–∫ –∫–∞—Ä—Ç–æ—á–∫–∞
- ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∏–µ–º–∫–∏: 10 –ø—É–Ω–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ UX –≤ Telegram

**–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- –ù–æ–≤—ã–µ: `src/v2/ui/{__init__,copy,keyboards,render,callbacks}.py`
- –ò–∑–º–µ–Ω–µ–Ω–∏—è: `src/v2/routers/{form,preview,menu,start,moderation}.py`
- –¢–µ—Å—Ç—ã: `tests/test_v2_ux.py`

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å —Å –§–∞–∑—ã 1 (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) –ø–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
